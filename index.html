<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Tycoon: The Archetype Strategy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; background-color: #f1f5f9; }
        .modal { transition: opacity 0.25s ease; }
        body.modal-active { overflow-x: hidden; overflow-y: hidden !important; }
        .slide-up { animation: slideUp 0.5s ease-out; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body class="text-slate-800 antialiased">

    <nav class="fixed top-0 w-full bg-slate-900 text-white z-50 shadow-lg px-6 py-3 flex justify-between items-center">
        <div class="flex items-center gap-3">
            <span class="text-xl font-bold text-yellow-400">üèôÔ∏è RE Tycoon</span>
            <span class="text-xs bg-slate-700 px-2 py-1 rounded text-slate-300">Beta v2.0</span>
        </div>
        <div class="flex gap-6 text-sm font-mono">
            <div>üóìÔ∏è Year: <span id="ui-year" class="font-bold text-blue-400">2019</span></div>
            <div>üí∞ Cash: <span id="ui-cash" class="font-bold text-green-400">0</span> THB</div>
            <div>üìú Portfolio: <span id="ui-assets">0</span> Unit</div>
        </div>
    </nav>

    <div id="game-container" class="pt-20 pb-10 max-w-5xl mx-auto px-4 min-h-screen flex flex-col justify-center">

        <section id="scene-char" class="slide-up">
            <h1 class="text-4xl font-bold text-center mb-4">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏±‡∏Å‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h1>
            <p class="text-center text-slate-500 mb-8">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ "‡∏£‡∏≠" ‡∏´‡∏£‡∏∑‡∏≠ "‡πÄ‡∏£‡∏¥‡πà‡∏°"</p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div onclick="startGame('junior')" class="bg-white p-6 rounded-xl shadow hover:shadow-xl cursor-pointer border-2 border-transparent hover:border-blue-500 transition">
                    <div class="text-5xl mb-4">üõµ</div>
                    <h3 class="text-xl font-bold">First Jobber</h3>
                    <p class="text-sm text-slate-500">Salary: 25,000 / mo</p>
                    <p class="text-xs text-red-500 mt-2">‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î: ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Type 1 ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÅ‡∏£‡∏Å</p>
                </div>
                <div onclick="startGame('senior')" class="bg-white p-6 rounded-xl shadow hover:shadow-xl cursor-pointer border-2 border-transparent hover:border-purple-500 transition">
                    <div class="text-5xl mb-4">üöó</div>
                    <h3 class="text-xl font-bold">Manager</h3>
                    <p class="text-sm text-slate-500">Salary: 80,000 / mo</p>
                    <p class="text-xs text-blue-500 mt-2">‡∏™‡∏°‡∏î‡∏∏‡∏•: ‡∏°‡∏µ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏π‡πâ‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏™‡∏∞‡∏™‡∏°‡πÄ‡∏á‡∏¥‡∏ô</p>
                </div>
                <div onclick="startGame('investor')" class="bg-white p-6 rounded-xl shadow hover:shadow-xl cursor-pointer border-2 border-transparent hover:border-amber-500 transition">
                    <div class="text-5xl mb-4">üèéÔ∏è</div>
                    <h3 class="text-xl font-bold">Executive Investor</h3>
                    <p class="text-sm text-slate-500">Salary: 250,000 / mo</p>
                    <p class="text-xs text-green-600 mt-2">‡∏≠‡∏¥‡∏™‡∏£‡∏∞: ‡∏ã‡∏∑‡πâ‡∏≠ Type 3 (Luxury) ‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°</p>
                </div>
            </div>
        </section>

        <section id="scene-action" class="hidden slide-up text-center">
            <h2 class="text-3xl font-bold mb-2">Round <span id="round-num">1</span>: Year <span id="round-year">2019</span></h2>
            <div class="bg-blue-50 p-4 rounded-lg inline-block mb-8 border-l-4 border-blue-600 text-left max-w-2xl">
                <p class="font-bold text-blue-800">üìä Market Sentiment:</p>
                <p id="market-news" class="text-sm text-blue-900">‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á ‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏™‡∏≤‡∏¢‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏π‡∏°‡∏™‡∏∏‡∏î‡∏Ç‡∏µ‡∏î...</p>
            </div>

            <div class="flex justify-center gap-8">
                <button onclick="goToMap()" class="group relative w-64 bg-white border-2 border-slate-200 rounded-2xl p-6 hover:border-blue-600 hover:shadow-lg transition text-left">
                    <div class="absolute -top-3 -right-3 bg-blue-600 text-white px-3 py-1 rounded-full text-xs font-bold shadow animate-bounce">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</div>
                    <div class="text-4xl mb-2">üè¢</div>
                    <h3 class="text-xl font-bold text-slate-800 group-hover:text-blue-600">‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</h3>
                    <p class="text-sm text-slate-500 mt-1">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏Å‡∏≥‡πÑ‡∏£</p>
                </button>

                <button onclick="skipYears()" class="group w-64 bg-white border-2 border-slate-200 rounded-2xl p-6 hover:border-green-600 hover:shadow-lg transition text-left">
                    <div class="text-4xl mb-2">‚è≥</div>
                    <h3 class="text-xl font-bold text-slate-800 group-hover:text-green-600">‡∏£‡∏≠‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</h3>
                    <p class="text-sm text-slate-500 mt-1">‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ 2 ‡∏õ‡∏µ ‡∏™‡∏∞‡∏™‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô</p>
                    <p class="text-xs text-green-600 font-bold mt-2">+ Cash from Salary</p>
                </button>
            </div>
        </section>

        <section id="scene-map" class="hidden slide-up">
            <button onclick="backToAction()" class="text-sm text-slate-500 hover:text-slate-800 mb-4">‚Üê Back</button>
            <h2 class="text-2xl font-bold mb-6 text-center">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏≥‡πÄ‡∏•‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û (Bangkok Zones)</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div onclick="selectDistrict('A')" class="bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:ring-4 ring-blue-400 transition relative group">
                    <div class="h-32 bg-gradient-to-r from-blue-900 to-indigo-800 flex items-center justify-center">
                        <span class="text-4xl">üåÉ</span>
                    </div>
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="text-xl font-bold">District A: Huai Khwang</h3>
                            <span class="bg-red-100 text-red-600 text-xs px-2 py-1 rounded font-bold">Hot Zone üî•</span>
                        </div>
                        <p class="text-sm text-slate-500 mb-4">New CBD Extension & Chinese Hub</p>
                        
                        <div class="grid grid-cols-3 gap-2 text-center text-xs">
                            <div class="bg-slate-50 p-2 rounded">
                                <div class="font-bold text-green-600">+8.5%</div>
                                <div class="text-slate-400">Avg Growth</div>
                            </div>
                            <div class="bg-slate-50 p-2 rounded">
                                <div class="font-bold">135k</div>
                                <div class="text-slate-400">Avg Price/Sqm</div>
                            </div>
                            <div class="bg-slate-50 p-2 rounded">
                                <div class="font-bold">High</div>
                                <div class="text-slate-400">Supply</div>
                            </div>
                        </div>
                        <div class="mt-4 text-xs text-slate-400 italic">"‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏î‡∏π‡∏î‡∏µ ‡πÅ‡∏ï‡πà‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏•‡∏∑‡πà‡∏≠‡∏°‡∏•‡πâ‡∏≥..."</div>
                    </div>
                </div>

                <div onclick="selectDistrict('B')" class="bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:ring-4 ring-green-400 transition opacity-70 hover:opacity-100">
                    <div class="h-32 bg-gradient-to-r from-green-800 to-teal-700 flex items-center justify-center">
                        <span class="text-4xl">üöâ</span>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-2">District B: Bang Sue</h3>
                        <p class="text-sm text-slate-500 mb-4">Transportation Hub & Government Complex</p>
                        <div class="grid grid-cols-3 gap-2 text-center text-xs">
                            <div class="bg-slate-50 p-2 rounded">
                                <div class="font-bold text-green-600">+3.2%</div>
                                <div class="text-slate-400">Avg Growth</div>
                            </div>
                            <div class="bg-slate-50 p-2 rounded">
                                <div class="font-bold">95k</div>
                                <div class="text-slate-400">Avg Price/Sqm</div>
                            </div>
                            <div class="bg-slate-50 p-2 rounded">
                                <div class="font-bold">Med</div>
                                <div class="text-slate-400">Supply</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="scene-archetype" class="hidden slide-up pb-20">
            <button onclick="show('scene-map')" class="text-sm text-slate-500 hover:text-slate-800 mb-4">‚Üê Back to Map</button>
            <h2 class="text-2xl font-bold mb-2">Select Archetype in <span id="selected-district-name" class="text-blue-600"></span></h2>
            <p class="text-sm text-slate-500 mb-6">‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "üîç ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ã‡∏∑‡πâ‡∏≠</p>

            <div id="archetype-list" class="space-y-4">
                </div>
        </section>

        <section id="scene-result" class="hidden slide-up">
            <h2 class="text-3xl font-bold text-center mb-6">The Final Showdown (2024)</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <div class="bg-white p-6 rounded-xl shadow border-t-4 border-blue-500">
                    <h3 class="font-bold text-lg text-slate-400">Round 1 Choice</h3>
                    <div class="text-2xl font-bold mb-2" id="res-name-1">-</div>
                    <div class="flex justify-between text-sm border-b py-2">
                        <span>Bought Price:</span>
                        <span id="res-buy-1">-</span>
                    </div>
                    <div class="flex justify-between text-sm border-b py-2">
                        <span>Current Price (2024):</span>
                        <span id="res-curr-1" class="font-bold">-</span>
                    </div>
                    <div class="flex justify-between text-sm pt-2">
                        <span>Total Gain (Price+Rent):</span>
                        <span id="res-gain-1" class="font-bold">-</span>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow border-t-4 border-purple-500">
                    <h3 class="font-bold text-lg text-slate-400">Round 2 Choice</h3>
                    <div class="text-2xl font-bold mb-2" id="res-name-2">-</div>
                    <div class="flex justify-between text-sm border-b py-2">
                        <span>Bought Price:</span>
                        <span id="res-buy-2">-</span>
                    </div>
                    <div class="flex justify-between text-sm border-b py-2">
                        <span>Current Price (2024):</span>
                        <span id="res-curr-2" class="font-bold">-</span>
                    </div>
                    <div class="flex justify-between text-sm pt-2">
                        <span>Total Gain (Price+Rent):</span>
                        <span id="res-gain-2" class="font-bold">-</span>
                    </div>
                </div>
            </div>

            <div class="bg-slate-800 text-white p-8 rounded-xl shadow-2xl">
                <h3 class="text-xl font-bold text-yellow-400 mb-4">üí° ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏´‡πâ‡∏ß‡∏¢‡∏Ç‡∏ß‡∏≤‡∏á (The Tale of Two Markets)</h3>
                <div class="space-y-4 text-sm font-light">
                    <p>
                        <span class="font-bold text-white">1. [cite_start]‡∏Å‡∏±‡∏ö‡∏î‡∏±‡∏Å‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢:</span> ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏ß‡πà‡∏≤ HPI ‡∏Ç‡∏≠‡∏á District A ‡∏î‡∏π‡∏™‡∏π‡∏á ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <span class="text-red-400">Type 1 (Entry)</span> ‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÅ‡∏û‡πâ‡∏ï‡∏•‡∏≤‡∏î ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Supply ‡∏•‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏£‡∏≤‡∏∞‡∏ö‡∏≤‡∏á (Laggard) [cite: 56, 63]
                    </p>
                    <p>
                        <span class="font-bold text-white">2. [cite_start]The K-Shaped Recovery:</span> ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <span class="text-green-400">Type 3 (Prime)</span> ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ä‡∏ô‡∏∞‡∏Ç‡∏≤‡∏î‡∏•‡∏≠‡∏¢ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô "‡∏Ç‡∏≠‡∏á‡∏™‡∏∞‡∏™‡∏°" ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ô‡∏£‡∏ß‡∏¢‡πÅ‡∏¢‡πà‡∏á‡∏Å‡∏±‡∏ô‡∏ã‡∏∑‡πâ‡∏≠‡πÉ‡∏ô‡∏õ‡∏µ 2021-2023 ‡∏™‡∏ß‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à [cite: 60, 65]
                    </p>
                    <p>
                        <span class="font-bold text-white">3. ‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏Ñ‡∏≠‡∏¢ (Skipping):</span> ‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Å‡∏≤‡∏£ "‡πÑ‡∏°‡πà‡∏ã‡∏∑‡πâ‡∏≠" ‡πÉ‡∏ô‡∏£‡∏≠‡∏ö‡πÅ‡∏£‡∏Å ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏õ‡∏ã‡∏∑‡πâ‡∏≠ "‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ (Archetype ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á)" ‡πÉ‡∏ô‡∏£‡∏≠‡∏ö‡∏™‡∏≠‡∏á ‡∏≠‡∏≤‡∏à‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏ñ‡∏π‡∏Å
                    </p>
                </div>
                <button onclick="location.reload()" class="mt-6 w-full bg-yellow-500 hover:bg-yellow-600 text-slate-900 font-bold py-3 rounded">Play Again</button>
            </div>
        </section>

    </div>

    <div id="analysis-modal" class="hidden fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-slide-up">
            <div class="bg-slate-900 text-white p-4 flex justify-between items-center">
                <h3 class="font-bold text-lg">üìÅ Confidential Analysis Report</h3>
                <button onclick="closeModal()" class="text-slate-400 hover:text-white">‚úï</button>
            </div>
            <div class="p-6">
                <h2 class="text-2xl font-bold text-blue-800 mb-1" id="modal-title">Type Name</h2>
                <p class="text-sm text-slate-500 mb-4 italic" id="modal-subtitle">"The Catchphrase"</p>

                <div class="space-y-3 mb-6">
                    <div>
                        <div class="flex justify-between text-xs mb-1"><span>Rental Yield (‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÄ‡∏ä‡πà‡∏≤)</span><span class="font-bold" id="modal-yield">High</span></div>
                        <div class="w-full bg-slate-200 rounded-full h-2"><div id="bar-yield" class="bg-green-500 h-2 rounded-full" style="width: 80%"></div></div>
                    </div>
                    <div>
                        <div class="flex justify-between text-xs mb-1"><span>Capital Gain (‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô)</span><span class="font-bold" id="modal-cap">Low</span></div>
                        <div class="w-full bg-slate-200 rounded-full h-2"><div id="bar-cap" class="bg-blue-500 h-2 rounded-full" style="width: 30%"></div></div>
                    </div>
                    <div>
                        <div class="flex justify-between text-xs mb-1"><span>Risk (‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á)</span><span class="font-bold" id="modal-risk">High</span></div>
                        <div class="w-full bg-slate-200 rounded-full h-2"><div id="bar-risk" class="bg-red-500 h-2 rounded-full" style="width: 90%"></div></div>
                    </div>
                </div>

                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 text-sm space-y-2 mb-6">
                    <p><b>üéØ Target:</b> <span id="modal-target">...</span></p>
                    <p><b>üìç Location:</b> <span id="modal-loc">...</span></p>
                    <p><b>‚ö†Ô∏è Warning:</b> <span id="modal-warn" class="text-red-600">...</span></p>
                </div>

                <div class="flex gap-4">
                    <button onclick="closeModal()" class="flex-1 border border-slate-300 py-2 rounded hover:bg-slate-50">Back</button>
                    <button onclick="confirmBuy()" class="flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700 font-bold shadow-lg">Confirm Buy</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- GAME DATA ---
        const gameState = {
            cash: 0,
            salary: 0,
            year: 2019,
            round: 1,
            inventory: [],
            selectedDistrict: null,
            tempSelection: null // For modal
        };

        [cite_start]// Source Data Mapping [cite: 1-27, 30-34, 61-66]
        const archetypes = {
            'A': [ // Huai Khwang
                {
                    id: 'A1',
                    name: 'Type 1: The Entry Level',
                    [cite_start]quote: '"‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏•‡πá‡∏Å ‡∏™‡πÄ‡∏õ‡∏Ñ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡πâ‡∏≤‡∏ß‡πÅ‡∏£‡∏Å‡πÉ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á" [cite: 2]',
                    price: 2200000,
                    stats: { yield: 80, cap: 30, risk: 90 }, // Visual %
                    details: {
                        yield: 'High (Initial)',
                        cap: 'Low (Stagnant)',
                        risk: 'High (Volatility)',
                        [cite_start]target: 'First Jobber / ‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ [cite: 8]',
                        [cite_start]loc: 'Deep Soi / ‡∏´‡πà‡∏≤‡∏á MRT ‡πÄ‡∏Å‡∏¥‡∏ô 800m [cite: 6]',
                        [cite_start]warn: '‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏¢‡∏≤‡∏Å (Capital Gain ‡∏ï‡∏∑‡πâ‡∏≠) ‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡πÄ‡∏¢‡∏≠‡∏∞‡∏°‡∏≤‡∏Å ‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡πÅ‡∏¢‡πà [cite: 9, 31]'
                    },
                    growthCurve: [1.0, 0.85, 0.82, 0.80, 0.81, 0.78] // Crash hard
                },
                {
                    id: 'A2',
                    name: 'Type 2: The Real Demand',
                    [cite_start]quote: '"‡∏ó‡∏≤‡∏á‡∏™‡∏≤‡∏¢‡∏Å‡∏•‡∏≤‡∏á ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏¥‡∏á" [cite: 11]',
                    price: 4500000,
                    stats: { yield: 60, cap: 60, risk: 40 },
                    details: {
                        yield: 'Medium',
                        cap: 'Medium (Inflation hedge)',
                        risk: 'Medium',
                        [cite_start]target: 'White Collar / Senior Officer [cite: 17]',
                        [cite_start]loc: '‡πÄ‡∏î‡∏¥‡∏ô‡∏ñ‡∏∂‡∏á MRT ‡πÑ‡∏î‡πâ (400-700m) [cite: 15]',
                        [cite_start]warn: '‡πÄ‡∏õ‡πá‡∏ô Safe Haven ‡∏™‡∏†‡∏≤‡∏û‡∏Ñ‡∏•‡πà‡∏≠‡∏á‡∏î‡∏µ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡πÑ‡∏£‡∏´‡∏ß‡∏∑‡∏≠‡∏´‡∏ß‡∏≤ [cite: 18]'
                    },
                    growthCurve: [1.0, 0.95, 0.96, 0.98, 1.02, 1.05] // Stable
                },
                {
                    id: 'A3',
                    name: 'Type 3: Prime & Prestige',
                    [cite_start]quote: '"‡∏Ç‡∏≠‡∏á‡∏™‡∏∞‡∏™‡∏° ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ö‡∏ô" [cite: 20]',
                    price: 12000000,
                    stats: { yield: 50, cap: 95, risk: 20 },
                    details: {
                        yield: 'Low (Entry expensive)',
                        cap: 'Very High (Scarcity)',
                        risk: 'Low (Long term)',
                        [cite_start]target: 'Expat / ‡∏ô‡∏±‡∏Å‡∏•‡∏á‡∏ó‡∏∏‡∏ô / ‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£ [cite: 26]',
                        [cite_start]loc: '‡∏ï‡∏¥‡∏î‡∏ñ‡∏ô‡∏ô‡πÉ‡∏´‡∏ç‡πà / ‡∏ï‡∏¥‡∏î MRT [cite: 24]',
                        [cite_start]warn: '‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏´‡∏•‡∏∏‡∏î‡∏°‡∏≤‡πÉ‡∏ô‡πÇ‡∏ã‡∏ô Undervalued ‡∏Ñ‡∏∑‡∏≠ Jackpot [cite: 34]'
                    },
                    growthCurve: [1.0, 1.05, 1.30, 1.45, 1.60, 1.75] // Moon
                }
            ],
            'B': [ // Boring Zone
                 {
                    id: 'B1',
                    name: 'Type 1: Budget Outer Ring',
                    quote: '‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡∏ä‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î',
                    price: 1500000,
                    stats: { yield: 70, cap: 20, risk: 50 },
                    details: { target: 'Local Workers', loc: 'Outer Ring', warn: '‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ó‡∏ö‡πÑ‡∏°‡πà‡∏Ç‡∏¢‡∏±‡∏ö' },
                    growthCurve: [1.0, 0.98, 0.97, 0.98, 0.99, 1.00]
                },
                {
                    id: 'B2',
                    name: 'Type 2: Transport Hub',
                    quote: '‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏Å‡∏•‡∏≤‡∏á‡∏Ø ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á',
                    price: 3500000,
                    stats: { yield: 50, cap: 50, risk: 30 },
                    details: { target: 'Commuters', loc: 'Near Hub', warn: '‡πÇ‡∏ï‡∏ä‡πâ‡∏≤‡πÜ ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á' },
                    growthCurve: [1.0, 1.01, 1.02, 1.03, 1.05, 1.08]
                }
            ]
        };

        // --- FUNCTIONS ---

        function show(id) {
            document.querySelectorAll('section').forEach(el => el.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }

        function updateUI() {
            document.getElementById('ui-cash').innerText = gameState.cash.toLocaleString();
            document.getElementById('ui-year').innerText = gameState.year;
            document.getElementById('ui-assets').innerText = gameState.inventory.length;
            document.getElementById('round-num').innerText = gameState.round;
            document.getElementById('round-year').innerText = gameState.year;
        }

        function startGame(role) {
            if(role === 'junior') { gameState.salary = 25000; gameState.cash = 500000; }
            if(role === 'senior') { gameState.salary = 80000; gameState.cash = 2000000; }
            if(role === 'investor') { gameState.salary = 250000; gameState.cash = 10000000; }
            
            updateUI();
            show('scene-action');
        }

        function skipYears() {
            // Logic: Skip 3 years (2019 -> 2022)
            const yearsSkipped = 3;
            const savings = (gameState.salary * 12 * yearsSkipped) * 0.5; // Save 50% of salary
            gameState.cash += savings;
            gameState.year += yearsSkipped;
            
            alert(`‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏£‡∏≠... ‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ 3 ‡∏õ‡∏µ ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ ${savings.toLocaleString()} ‡∏ö‡∏≤‡∏ó`);
            
            // If Round 1, move to Round 2 immediately? Or just update state?
            // For simplicity: If skip in Round 1 -> Go to Round 2 directly.
            if(gameState.round === 1) {
                gameState.round = 2;
                gameState.year = 2022; // Set exact
                
                // Add "Skipped" placeholder to inventory 1
                gameState.inventory.push({ type: 'skipped', name: 'Saving (No Asset)', price: 0, yearBought: 2019 });
                
                document.getElementById('market-news').innerText = "‡∏õ‡∏µ 2022: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏ü‡∏∑‡πâ‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏ö‡∏ö K-Shape ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô...";
                updateUI();
                show('scene-action');
            } else {
                // If skip in Round 2 -> End Game
                gameState.inventory.push({ type: 'skipped', name: 'Saving (No Asset)', price: 0, yearBought: 2022 });
                endGame();
            }
        }

        function goToMap() {
            show('scene-map');
        }

        function backToAction() {
            show('scene-action');
        }

        function selectDistrict(d) {
            gameState.selectedDistrict = d;
            const districtName = d === 'A' ? 'Huai Khwang' : 'Bang Sue';
            document.getElementById('selected-district-name').innerText = districtName;
            
            // Render Archetypes
            const container = document.getElementById('archetype-list');
            container.innerHTML = '';
            
            const list = archetypes[d];
            list.forEach(item => {
                const canAfford = gameState.cash >= (item.price * 0.1); // Down payment 10%
                const btnClass = canAfford ? 'bg-blue-100 text-blue-700 hover:bg-blue-200' : 'bg-gray-100 text-gray-400 cursor-not-allowed';
                
                const html = `
                <div class="bg-white border rounded-xl p-4 flex justify-between items-center shadow-sm">
                    <div>
                        <h4 class="font-bold text-lg">${item.name}</h4>
                        <p class="text-xs text-slate-500">${item.quote}</p>
                        <p class="font-mono text-sm mt-1">Price: ${(item.price/1000000).toFixed(1)} MB</p>
                    </div>
                    <button onclick="openAnalysis('${item.id}')" class="px-4 py-2 rounded-lg font-bold text-sm ${btnClass}">
                        üîç ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå
                    </button>
                </div>`;
                container.innerHTML += html;
            });

            show('scene-archetype');
        }

        function openAnalysis(id) {
            const list = archetypes[gameState.selectedDistrict];
            const item = list.find(x => x.id === id);
            gameState.tempSelection = item;

            // Fill Modal Data
            document.getElementById('modal-title').innerText = item.name;
            document.getElementById('modal-subtitle').innerText = item.quote;
            
            document.getElementById('bar-yield').style.width = item.stats.yield + '%';
            document.getElementById('modal-yield').innerText = item.details.yield;
            
            document.getElementById('bar-cap').style.width = item.stats.cap + '%';
            document.getElementById('modal-cap').innerText = item.details.cap;
            
            document.getElementById('bar-risk').style.width = item.stats.risk + '%';
            document.getElementById('modal-risk').innerText = item.details.risk;

            document.getElementById('modal-target').innerText = item.details.target;
            document.getElementById('modal-loc').innerText = item.details.loc;
            document.getElementById('modal-warn').innerText = item.details.warn;

            // Check money for Buy button
            const downPayment = item.price * 0.1;
            /* Allow buying if enough cash for down payment */
            if(gameState.cash < downPayment) {
               // Disable button logic if needed, but we handled it in list view
            }

            document.getElementById('analysis-modal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('analysis-modal').classList.add('hidden');
        }

        function confirmBuy() {
            const item = gameState.tempSelection;
            const downPayment = item.price * 0.1; // Pay 10% down
            
            if(gameState.cash < downPayment) {
                alert("‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡πÑ‡∏°‡πà‡∏û‡∏≠‡∏à‡πà‡∏≤‡∏¢‡∏î‡∏≤‡∏ß‡∏ô‡πå!");
                return;
            }

            gameState.cash -= downPayment;
            
            // Record Asset
            gameState.inventory.push({
                ...item,
                yearBought: gameState.year,
                buyPrice: item.price
            });

            closeModal();
            
            if(gameState.round === 1) {
                gameState.round = 2;
                gameState.year = 2022; // Jump to next decision point
                
                // Simulate Rent income from 2019-2022 (3 years)
                // If Type 1: Covid hit, low rent. If Type 3: Rent ok.
                // Simple logic: Rent = Price * Yield * 3 years * Efficiency
                let efficiency = item.id.includes('1') ? 0.6 : 0.9; // Type 1 impacted more
                // Rough Yield calc from source (approx 4-5%)
                let estYield = 0.045; 
                let rentIncome = (item.price * estYield * 3 * efficiency);
                gameState.cash += rentIncome;

                document.getElementById('market-news').innerText = `‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡∏™‡∏∞‡∏™‡∏°‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì ${Math.round(rentIncome/1000).toLocaleString()}k ‡∏ö‡∏≤‡∏ó... ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏õ‡∏µ 2022 ‡∏ï‡∏•‡∏≤‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏¥‡∏®!`;
                
                updateUI();
                show('scene-action');
            } else {
                endGame();
            }
        }

        function endGame() {
            show('scene-result');
            
            // Process Asset 1
            const asset1 = gameState.inventory[0];
            processResult('1', asset1);

            // Process Asset 2
            const asset2 = gameState.inventory[1];
            processResult('2', asset2);
        }

        function processResult(slotId, asset) {
            if(asset.type === 'skipped') {
                document.getElementById(`res-name-${slotId}`).innerText = "‚ùå Skipped / Saving";
                document.getElementById(`res-curr-${slotId}`).innerText = "No Asset";
                document.getElementById(`res-gain-${slotId}`).innerText = "Interest Only";
                return;
            }

            document.getElementById(`res-name-${slotId}`).innerText = asset.name;
            document.getElementById(`res-buy-${slotId}`).innerText = (asset.buyPrice/1000000).toFixed(2) + " MB";

            // Calculate Growth based on GrowthCurve
            // Index 0 = 2019, Index 5 = 2024
            const startIdx = asset.yearBought === 2019 ? 0 : 3; // 2019 or 2022
            const endIdx = 5; // 2024
            
            // Growth Multiplier: EndValue / StartValue
            const growthFactor = asset.growthCurve[endIdx] / asset.growthCurve[startIdx];
            const currentPrice = asset.buyPrice * growthFactor;
            
            // Rent Logic (Roughly)
            const yearsHeld = 2024 - asset.yearBought;
            const totalRent = (asset.buyPrice * 0.045 * yearsHeld);

            const totalGain = (currentPrice - asset.buyPrice) + totalRent;
            const sign = totalGain > 0 ? "+" : "";

            document.getElementById(`res-curr-${slotId}`).innerText = (currentPrice/1000000).toFixed(2) + " MB";
            document.getElementById(`res-gain-${slotId}`).innerText = `${sign}${(totalGain/1000000).toFixed(2)} MB`;
            
            if(totalGain < 0) document.getElementById(`res-gain-${slotId}`).classList.add('text-red-500');
            else document.getElementById(`res-gain-${slotId}`).classList.add('text-green-500');
        }

        // Start
        show('scene-char');

    </script>
</body>
</html>
